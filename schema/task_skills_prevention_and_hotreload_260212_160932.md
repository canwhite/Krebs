# Task: æ·»åŠ  Skills éªŒè¯å’Œçƒ­åŠ è½½åŠŸèƒ½

**ä»»åŠ¡ID**: task_skills_prevention_and_hotreload_260212_160932
**åˆ›å»ºæ—¶é—´**: 2026-02-12
**çŠ¶æ€**: å·²å®Œæˆ
**ç›®æ ‡**:
1. âœ… æ·»åŠ  skill æ ¼å¼éªŒè¯ï¼Œé˜²æ­¢æ— æ•ˆçš„ skill æ–‡ä»¶è¢«åŠ è½½
2. âœ… å¯ç”¨çƒ­åŠ è½½ï¼Œä¿®æ”¹ skill åè‡ªåŠ¨æ›´æ–° UI
3. âœ… åˆ›å»ºéªŒè¯ CLI å‘½ä»¤

## æœ€ç»ˆç›®æ ‡
- âœ… æ·»åŠ  skill æ—¶è‡ªåŠ¨éªŒè¯æ ¼å¼
- âœ… ä¿®æ”¹ skill æ–‡ä»¶å UI è‡ªåŠ¨åˆ·æ–°ï¼Œæ— éœ€é‡å¯
- âœ… æä¾› CLI å·¥å…·éªŒè¯æ‰€æœ‰ skills

## å·²å®Œæˆçš„å·¥ä½œ

### 1. çƒ­åŠ è½½åŠŸèƒ½ âœ…
**æ–‡ä»¶**: `src/index.ts:138-143`

æ·»åŠ äº†ä»¥ä¸‹ä»£ç ï¼š
```typescript
// å¯ç”¨çƒ­åŠ è½½ï¼šç›‘å¬ skills ç›®å½•å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°åŠ è½½
try {
  await skillsManager.enableHotReload();
  logger.info("å·²å¯ç”¨ SkillsManager çƒ­åŠ è½½ - ä¿®æ”¹ skill æ–‡ä»¶åå°†è‡ªåŠ¨ç”Ÿæ•ˆ");
} catch (error) {
  logger.warn("çƒ­åŠ è½½å¯ç”¨å¤±è´¥ï¼Œå°†éœ€è¦æ‰‹åŠ¨é‡å¯æœåŠ¡å™¨ä»¥åŠ è½½ skills:", error);
}
```

**æ•ˆæœ**ï¼š
- âœ… ä¿®æ”¹ skill æ–‡ä»¶åè‡ªåŠ¨é‡æ–°åŠ è½½
- âœ… æ— éœ€æ‰‹åŠ¨é‡å¯æœåŠ¡å™¨
- âœ… UI è‡ªåŠ¨æ›´æ–°æ˜¾ç¤º

### 2. æ ¼å¼éªŒè¯åŠŸèƒ½ âœ…
**æ–‡ä»¶**: `src/agent/skills/validator.ts`ï¼ˆæ–°å»ºï¼‰

å®ç°äº†ä»¥ä¸‹éªŒè¯è§„åˆ™ï¼š
1. **description-quotes**: description å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼ˆä¸èƒ½æ˜¯æ•°ç»„ï¼‰ï¼ŒåŒ…å«ç‰¹æ®Šå­—ç¬¦æ—¶å¿…é¡»ç”¨å¼•å·
2. **name-format**: name å¿…é¡»æ˜¯å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ï¼ˆç¬¦åˆ pi-coding-agent è§„èŒƒï¼‰
3. **metadata-json**: metadata å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²
4. **required-fields**: å¿…é¡»åŒ…å« name å’Œ description å­—æ®µ

**é›†æˆ**: `src/agent/skills/loader.ts:19`
- åœ¨åŠ è½½ skill æ—¶è‡ªåŠ¨éªŒè¯æ ¼å¼
- è·³è¿‡æ ¼å¼é”™è¯¯çš„ skill å¹¶è®°å½•è­¦å‘Š
- ä¸ä¼šå› ä¸ºæ ¼å¼é”™è¯¯è€Œå´©æºƒ

**æ•ˆæœ**ï¼š
- âœ… åŠ è½½æ—¶è‡ªåŠ¨éªŒè¯æ¯ä¸ª skill
- âœ… æ ¼å¼é”™è¯¯çš„ skill è¢«è·³è¿‡å¹¶è®°å½•åˆ°æ—¥å¿—
- âœ… æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

### 3. CLI éªŒè¯å‘½ä»¤ âœ…
**æ–‡ä»¶**: `src/cli/commands/skills-validate.ts`ï¼ˆæ–°å»ºï¼‰
**é›†æˆ**: `src/cli/index.ts`
**è„šæœ¬**: `package.json` - æ·»åŠ äº† `validate:skills` å‘½ä»¤

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# éªŒè¯é»˜è®¤ç›®å½•ï¼ˆskills/bundledï¼‰
npm run validate:skills

# éªŒè¯è‡ªå®šä¹‰ç›®å½•
krebs validate:skills skills/custom
```

**æ•ˆæœ**ï¼š
- âœ… æ‰¹é‡éªŒè¯æ‰€æœ‰ skills
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯
- âœ… é›†æˆåˆ° CLI å‘½ä»¤ç³»ç»Ÿ

## ä½¿ç”¨è¯´æ˜

### éªŒè¯ Skills æ ¼å¼

åœ¨æ·»åŠ æˆ–ä¿®æ”¹ skill æ–‡ä»¶åï¼Œå¯ä»¥è¿è¡ŒéªŒè¯å‘½ä»¤æ£€æŸ¥æ ¼å¼ï¼š

```bash
npm run validate:skills
```

æ­£ç¡®çš„ skill æ–‡ä»¶æ ¼å¼ç¤ºä¾‹ï¼š
```yaml
---
name: my-skill
description: "è¿™æ˜¯ä¸€ä¸ªæè¿°"
metadata: '{"krebs":{"emoji":"ğŸ”§","category":"Test","tags":["test"]}}'
---
```

å¸¸è§é”™è¯¯ï¼š
- âŒ `description: [TODO: ...]` â†’ åº”è¯¥æ˜¯å­—ç¬¦ä¸²ï¼Œç”¨å¼•å·åŒ…å›´
- âŒ `name: MySkill` â†’ åº”è¯¥æ˜¯å°å†™
- âŒ `metadata: '{"bad": json}'` â†’ JSON æ ¼å¼é”™è¯¯

### çƒ­åŠ è½½ä½¿ç”¨

çƒ­åŠ è½½å·²è‡ªåŠ¨å¯ç”¨ï¼Œä¿®æ”¹ skill æ–‡ä»¶åä¼šï¼š
1. è‡ªåŠ¨é‡æ–°åŠ è½½æ–‡ä»¶
2. æ›´æ–°å†…å­˜ä¸­çš„ skills åˆ—è¡¨
3. ä¸‹æ¬¡ API è¯·æ±‚è¿”å›æœ€æ–°æ•°æ®
4. UI åˆ·æ–°åæ˜¾ç¤ºæ›´æ–°

æ— éœ€æ‰‹åŠ¨é‡å¯æœåŠ¡å™¨ï¼

## æŠ€æœ¯ç»†èŠ‚

### éªŒè¯æµç¨‹
```
1. è¯»å– SKILL.md æ–‡ä»¶
2. è§£æ YAML frontmatter
3. åº”ç”¨æ‰€æœ‰éªŒè¯è§„åˆ™
4. æ”¶é›†é”™è¯¯å’Œè­¦å‘Š
5. å¦‚æœæœ‰é”™è¯¯ï¼šè·³è¿‡è¯¥ skill
6. å¦‚æœæ ¼å¼æ­£ç¡®ï¼šåŠ è½½è¯¥ skill
7. è®°å½•è·³è¿‡ç»Ÿè®¡åˆ°æ—¥å¿—
```

### çƒ­åŠ è½½æµç¨‹
```
1. å¯åŠ¨æ—¶è°ƒç”¨ enableHotReload()
2. ä½¿ç”¨ fs.watch ç›‘æ§ skills/bundled ç›®å½•
3. æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–æ—¶è§¦å‘ reload
4. é‡æ–°åŠ è½½æ‰€æœ‰ skills
5. æ›´æ–°å†…éƒ¨å¿«ç…§
6. ä¸‹æ¬¡ API è¯·æ±‚è¿”å›æ–°æ•°æ®
```

## æµ‹è¯•ç»“æœ

- âœ… æ„å»ºæˆåŠŸï¼Œæ—  TypeScript é”™è¯¯
- âœ… çƒ­åŠ è½½å·²å¯ç”¨
- âœ… éªŒè¯å™¨å·²é›†æˆåˆ° loader
- âœ… CLI å‘½ä»¤å·²æ·»åŠ 

**å¾…ç”¨æˆ·éªŒè¯**ï¼š
1. é‡å¯æœåŠ¡å™¨
2. ä¿®æ”¹ä»»æ„ skill æ–‡ä»¶
3. åˆ·æ–° UI æŸ¥çœ‹æ˜¯å¦è‡ªåŠ¨æ›´æ–°
4. è¿è¡Œ `npm run validate:skills` æŸ¥çœ‹éªŒè¯ç»“æœ
