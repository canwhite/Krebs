# Task: é›†æˆå®Œæ•´çš„ Skills ç³»ç»Ÿï¼ˆå‚è€ƒ openclaw-cn-dsï¼‰

**ä»»åŠ¡ID**: task_skills_260204_145005
**åˆ›å»ºæ—¶é—´**: 2026-02-04 14:50:05
**å®Œæˆæ—¶é—´**: 2026-02-04
**çŠ¶æ€**: âœ… å·²å®Œæˆ
**ç›®æ ‡**: å°† openclaw-cn-ds çš„å®Œæ•´ skills åŠŸèƒ½é›†æˆåˆ° Krebs é¡¹ç›®

## æœ€ç»ˆç›®æ ‡

åœ¨ Krebs é¡¹ç›®ä¸­å®ç°ç±»ä¼¼ openclaw-cn-ds çš„å®Œæ•´ skills ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š
1. **å¤šä½ç½®æŠ€èƒ½åŠ è½½**ï¼ˆBundledã€Managedã€Workspaceã€Extraï¼‰
2. **SKILL.md æ–‡ä»¶æ ¼å¼**ï¼ˆfrontmatter + contentï¼‰
3. **æŠ€èƒ½æ³¨å†Œä¸å‘ç°æœºåˆ¶**
4. **æŠ€èƒ½è¿‡æ»¤ä¸ Eligibility æ£€æŸ¥**
5. **æŠ€èƒ½å¿«ç…§ä¸ Prompt æ„å»º**
6. **æŠ€èƒ½å®‰è£…ä¸ä¾èµ–ç®¡ç†**
7. **æŠ€èƒ½çƒ­åŠ è½½ï¼ˆå¯é€‰ï¼‰**

## å‚è€ƒæ¶æ„åˆ†æï¼ˆopenclaw-cn-dsï¼‰

### æ ¸å¿ƒæ–‡ä»¶
- `src/config/types.skills.ts` - Skills é…ç½®ç±»å‹
- `src/agents/skills/types.ts` - Skills æ ¸å¿ƒç±»å‹
- `src/agents/skills/workspace.ts` - Skills åŠ è½½ä¸å¿«ç…§
- `src/agents/skills/config.ts` - Skills é…ç½®è§£æ
- `src/agents/skills/frontmatter.ts` - Frontmatter è§£æ
- `src/agents/skills/env-overrides.ts` - ç¯å¢ƒå˜é‡è¦†ç›–
- `src/agents/skills/plugin-skills.ts` - Plugin skills

### SKILL.md æ ¼å¼ç¤ºä¾‹
```yaml
---
name: GitHub
description: "ä½¿ç”¨`gh`å‘½ä»¤è¡Œå·¥å…·ä¸GitHubäº¤äº’..."
metadata: {
  "clawdbot": {
    "emoji": "ğŸ™",
    "requires": {"bins": ["gh"]},
    "install": [...]
  }
}
---

# GitHub Skill

Use the `gh` CLI to interact with GitHub...
```

### æŠ€èƒ½åŠ è½½ä¼˜å…ˆçº§
```
extra < bundled < managed < workspace
```

### è°ƒç”¨æ—¶æœº
- åœ¨ `src/commands/agent.ts` ä¸­è°ƒç”¨ `resolveSkillsPromptForRun()`
- åœ¨ `src/cron/isolated-agent/run.ts` ä¸­è°ƒç”¨ `buildWorkspaceSkillSnapshot()`
- åœ¨ `src/auto-reply/reply/session-updates.ts` ä¸­æ„å»ºæŠ€èƒ½å¿«ç…§

## æ‹†è§£æ­¥éª¤

### 1. æ·±åº¦ç ”ç©¶ openclaw-cn-ds å®ç°
- [ ] 1.1 åˆ†ææŠ€èƒ½ç±»å‹å®šä¹‰ï¼ˆtypes.tsï¼‰
- [ ] 1.2 ç†è§£æŠ€èƒ½åŠ è½½é€»è¾‘ï¼ˆworkspace.tsï¼‰
- [ ] 1.3 ç ”ç©¶æŠ€èƒ½é…ç½®è§£æï¼ˆconfig.ts, frontmatter.tsï¼‰
- [ ] 1.4 åˆ†ææŠ€èƒ½è°ƒç”¨æ—¶æœºï¼ˆcommands/agent.ts, cron/isolated-agent/run.tsï¼‰
- [ ] 1.5 ç†è§£æŠ€èƒ½å®‰è£…æœºåˆ¶ï¼ˆskills-install.tsï¼‰

### 2. è®¾è®¡ Krebs Skills æ¶æ„
- [ ] 2.1 å®šä¹‰ç±»å‹ç³»ç»Ÿï¼ˆtypes/skills.tsï¼‰
- [ ] 2.2 è®¾è®¡é…ç½®æ¥å£ï¼ˆconfig/skills.tsï¼‰
- [ ] 2.3 è§„åˆ’ç›®å½•ç»“æ„
- [ ] 2.4 ç¡®å®šä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆç‚¹

### 3. å®ç°æ ¸å¿ƒåŠŸèƒ½
- [ ] 3.1 å®ç° Frontmatter è§£æå™¨
- [ ] 3.2 å®ç°æŠ€èƒ½åŠ è½½å™¨ï¼ˆå¤šä½ç½®æ”¯æŒï¼‰
- [ ] 3.3 å®ç°æŠ€èƒ½æ³¨å†Œè¡¨
- [ ] 3.4 å®ç°æŠ€èƒ½å¿«ç…§æ„å»º
- [ ] 3.5 å®ç°æŠ€èƒ½è¿‡æ»¤ä¸ Eligibility æ£€æŸ¥
- [ ] 3.6 å®ç° Prompt æ„å»ºå™¨

### 4. é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ
- [ ] 4.1 é›†æˆåˆ° Orchestratorï¼ˆæŠ€èƒ½è°ƒåº¦ï¼‰
- [ ] 4.2 é›†æˆåˆ° Agentï¼ˆæŠ€èƒ½ Prompt æ³¨å…¥ï¼‰
- [ ] 4.3 é›†æˆåˆ° ChatServiceï¼ˆæŠ€èƒ½æŸ¥è¯¢ï¼‰
- [ ] 4.4 æ›´æ–°é…ç½®ç³»ç»Ÿ

### 5. å®ç°æŠ€èƒ½ç®¡ç†åŠŸèƒ½
- [ ] 5.1 æŠ€èƒ½å®‰è£…å‘½ä»¤
- [ ] 5.2 æŠ€èƒ½åˆ—è¡¨å‘½ä»¤
- [ ] 5.3 æŠ€èƒ½çŠ¶æ€æ£€æŸ¥
- [ ] 5.4 æŠ€èƒ½çƒ­åŠ è½½ï¼ˆå¯é€‰ï¼‰

### 6. æµ‹è¯•ä¸æ–‡æ¡£
- [ ] 6.1 ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] 6.2 ç¼–å†™é›†æˆæµ‹è¯•
- [ ] 6.3 åˆ›å»ºç¤ºä¾‹ Skills
- [ ] 6.4 æ›´æ–° production.md
- [ ] 6.5 ç¼–å†™ä½¿ç”¨æ–‡æ¡£

## å½“å‰è¿›åº¦

### âœ… æ‰€æœ‰é˜¶æ®µå·²å®Œæˆï¼åŒ…æ‹¬æµ‹è¯•ï¼

**Phase 1: åŸºç¡€è®¾æ–½æ­å»º** âœ…
- [x] å®‰è£… @mariozechner/pi-coding-agent@0.51.5
- [x] åˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶ (types.ts)
- [x] åˆ›å»ºç›®å½•ç»“æ„ (skills/bundled/)

**Phase 2: æ ¸å¿ƒæ¨¡å—å®ç°** âœ…
- [x] å®ç° SkillsLoader
- [x] å®ç° SkillsFormatter
- [x] å®ç° SkillsHotReload
- [x] å®ç° SkillsManager (Facade)

**Phase 3: ç³»ç»Ÿé›†æˆ** âœ…
- [x] é›†æˆåˆ° Orchestrator
- [x] é›†æˆåˆ° Agent
- [x] é›†æˆåˆ° ChatService

**Phase 4: ç¤ºä¾‹ä¸æµ‹è¯•** âœ…
- [x] åˆ›å»ºç¤ºä¾‹ Skills (github, filesystem, web-search)
- [x] **ç¼–å†™å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼ˆ54ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ï¼ï¼‰**
- [x] **Build æˆåŠŸï¼Œæ— ç±»å‹é”™è¯¯**

**Phase 5: æ–‡æ¡£ä¸ä¼˜åŒ–** âœ…
- [x] ç¼–å†™æŠ€èƒ½ç¼–å†™æŒ‡å—
- [x] æ›´æ–° production.md

## æµ‹è¯•ç»“æœ

### âœ… Build çŠ¶æ€
```
> tsc
âœ… æˆåŠŸ - æ— ç±»å‹é”™è¯¯
```

### âœ… æµ‹è¯•çŠ¶æ€
```
Test Files  3 passed (3)
Tests       54 passed (54)
Duration    778ms
```

**æµ‹è¯•è¦†ç›–**ï¼š
- `test/skills/formatter.test.ts` - 25 ä¸ªæµ‹è¯• âœ…
- `test/skills/loader.test.ts` - 8 ä¸ªæµ‹è¯• âœ…
- `test/skills/manager.test.ts` - 21 ä¸ªæµ‹è¯• âœ…

## æœ€ç»ˆå®ç°æˆæœ

### æ ¸å¿ƒæ–‡ä»¶
å·²åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶ï¼š

**æ ¸å¿ƒæ¨¡å—**ï¼š
- `src/agent/skills/types.ts` - ç±»å‹å®šä¹‰
- `src/agent/skills/skills-manager.ts` - Facade å±‚
- `src/agent/skills/loader.ts` - æŠ€èƒ½åŠ è½½å™¨
- `src/agent/skills/formatter.ts` - Prompt æ„å»ºå™¨
- `src/agent/skills/hot-reload.ts` - çƒ­åŠ è½½ç®¡ç†
- `src/agent/skills/index.ts` - å¯¼å‡ºæ–‡ä»¶

**ç³»ç»Ÿé›†æˆ**ï¼š
- `src/agent/core/orchestrator.ts` - é›†æˆ SkillsManager
- `src/agent/core/agent.ts` - æ³¨å…¥æŠ€èƒ½ Prompt
- `src/gateway/service/chat-service.ts` - æ·»åŠ æŠ€èƒ½æŸ¥è¯¢æ¥å£

**ç¤ºä¾‹æŠ€èƒ½**ï¼š
- `skills/bundled/github/SKILL.md`
- `skills/bundled/filesystem/SKILL.md`
- `skills/bundled/web-search/SKILL.md`

**æ–‡æ¡£**ï¼š
- `skills/README.md` - æŠ€èƒ½ç¼–å†™æŒ‡å—
- `production.md` - å·²æ›´æ–°

### æ¶æ„ç‰¹ç‚¹
1. âœ… **ä½¿ç”¨ @mariozechner/pi-coding-agent** - æˆç†Ÿçš„å®ç°
2. âœ… **æ¨¡å—åŒ–è®¾è®¡** - Facade æ¨¡å¼ï¼Œé«˜å†…èšä½è€¦åˆ
3. âœ… **ä»… Bundled Skills** - ç®€åŒ–ç‰ˆæœ¬
4. âœ… **çƒ­åŠ è½½** - chokidar ç›‘å¬æ–‡ä»¶å˜åŒ–
5. âœ… **å‘åå…¼å®¹** - ä¿ç•™æ—§çš„ SkillRegistry

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **æµ‹è¯•ç³»ç»Ÿ** - è¿è¡Œå¹¶æµ‹è¯• Skills åŠŸèƒ½
2. **ç¼–å†™æµ‹è¯•** - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
3. **æ€§èƒ½ä¼˜åŒ–** - å¦‚éœ€è¦
4. **ä¸‹ä¸€æ­¥è¿­ä»£**ï¼š
   - [ ] Managed Skills (~/.config/krebs/skills)
   - [ ] Workspace Skills (./skills)
   - [ ] æŠ€èƒ½ä¾èµ–è‡ªåŠ¨å®‰è£…

## âœ… ç”¨æˆ·ç¡®è®¤çš„è®¾è®¡å†³ç­–ï¼ˆå·²æ›´æ–°ï¼‰

1. **æŠ€èƒ½åŠ è½½ä½ç½®**ï¼š**ç®€åŒ–ä¸º Bundled Skills**
   - âœ… Bundled skillsï¼ˆå†…ç½®æŠ€èƒ½ï¼‰- `src/agent/skills/bundled/` æˆ– `skills/`
   - âŒ Managed skillsï¼ˆæš‚ä¸å®ç°ï¼Œä¸‹ä¸ªè¿­ä»£ï¼‰
   - âŒ Workspace skillsï¼ˆæš‚ä¸å®ç°ï¼Œä¸‹ä¸ªè¿­ä»£ï¼‰
   - âŒ Extra skillsï¼ˆæš‚ä¸å®ç°ï¼Œä¸‹ä¸ªè¿­ä»£ï¼‰
   - **ç†ç”±**: ä¿æŒç®€æ´ï¼Œç¬¬ä¸€é˜¶æ®µä¸“æ³¨äºå†…ç½®æŠ€èƒ½

2. **æŠ€èƒ½å®‰è£…æœºåˆ¶**ï¼š**ä¸‹ä¸€ä¸ªè¿­ä»£**
   - âŒ è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼ˆä¸‹ä¸ªè¿­ä»£ï¼‰
   - âŒ äºŒè¿›åˆ¶æ–‡ä»¶æ£€æµ‹ï¼ˆä¸‹ä¸ªè¿­ä»£ï¼‰
   - âœ… ä¿ç•™ metadata ç»“æ„ï¼ˆä¸ºæœªæ¥æ‰©å±•åšå‡†å¤‡ï¼‰
   - **ç†ç”±**: é™ä½å¤æ‚åº¦ï¼Œç¬¬ä¸€é˜¶æ®µåªå®ç°æŠ€èƒ½åŠ è½½å’Œæ³¨å…¥

3. **ä¾èµ–åº“é€‰æ‹©**ï¼š**ä½¿ç”¨ @mariozechner/pi-coding-agent**
   - âœ… ä½¿ç”¨ `@mariozechner/pi-coding-agent` åº“
   - âœ… å¤ç”¨ `loadSkillsFromDir`ã€`formatSkillsForPrompt` ç­‰å‡½æ•°
   - **ç†ç”±**: æˆç†Ÿçš„å®ç°ï¼Œå‡å°‘é‡å¤é€ è½®å­

4. **æŠ€èƒ½çƒ­åŠ è½½**ï¼š**éœ€è¦**
   - âœ… ä½¿ç”¨ chokidar ç›‘å¬ skills ç›®å½•
   - âœ… è‡ªåŠ¨é‡æ–°åŠ è½½å˜æ›´çš„æŠ€èƒ½
   - **ç†ç”±**: æå‡å¼€å‘ä½“éªŒ

5. **æŠ€èƒ½å‘½ä»¤ç³»ç»Ÿ**ï¼š**æš‚ä¸å®ç°**
   - âŒ Discord/Telegram é£æ ¼çš„å‘½ä»¤
   - **ç†ç”±**: Krebs ä¸ç›´æ¥é›†æˆèŠå¤©å¹³å°

6. **ç¯å¢ƒå˜é‡è¦†ç›–**ï¼š**æš‚ä¸å®ç°**
   - âŒ æŠ€èƒ½çº§åˆ«çš„ç¯å¢ƒå˜é‡
   - **ç†ç”±**: é™ä½å¤æ‚åº¦ï¼Œç¬¬ä¸€é˜¶æ®µä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½

7. **ç³»ç»Ÿæ¨¡å—åŒ–**ï¼š**æ ¸å¿ƒè¦æ±‚**
   - âœ… æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œ
   - âœ… é«˜å†…èšä½è€¦åˆ
   - âœ… æ˜“äºæµ‹è¯•å’Œæ‰©å±•
